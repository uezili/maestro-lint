appId: com.test.hierarchy

tags:
  - wip
  - smoke

name: '[TEST-002] - Teste de erro de hierarquia YAML'

onFlowStart:
  - runFlow: '../../common/subflows/setup.yaml'

onFlowComplete:
  - runFlow: '../../common/subflows/teardown.yaml'
---
# ============================================================================
# TESTE 1: ERRO - commands dentro de when (incorreto)
# ============================================================================
# ❌ ERRO: commands está dentro de when, deveria estar no mesmo nível
- runFlow:
    when:
      platform: android
      commands:
      - tapOn: '.*Número do celular.*'

# ============================================================================
# TESTE 2: CORRETO - commands no mesmo nível de when
# ============================================================================
# ✅ CORRETO: commands e when são irmãos
- runFlow:
    when:
      platform: android
    commands:
      - tapOn: '.*Número do celular.*'

# ============================================================================
# TESTE 3: ERRO - file dentro de when (incorreto)
# ============================================================================
# ❌ ERRO: file está dentro de when, deveria estar no mesmo nível
- runFlow:
    when:
      platform: ios
      file: '../../common/subflows/setup.yaml'

# ============================================================================
# TESTE 4: CORRETO - file no mesmo nível de when
# ============================================================================
# ✅ CORRETO: file e when são irmãos
- runFlow:
    when:
      platform: ios
    file: '../../common/subflows/setup.yaml'

# ============================================================================
# TESTE 5: ERRO - env dentro de when (incorreto)
# ============================================================================
# ❌ ERRO: env está dentro de when, deveria estar no mesmo nível
- runFlow:
    when:
      platform: android
      env:
        PRODUCT: 'Test'
      file: 'test.yaml'

# ============================================================================
# TESTE 6: CORRETO - env no mesmo nível de when
# ============================================================================
# ✅ CORRETO: env, when e file são irmãos
- runFlow:
    when:
      platform: android
    env:
      PRODUCT: 'Test'
    file: 'test.yaml'
